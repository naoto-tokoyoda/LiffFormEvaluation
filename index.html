<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>人事評価テスト</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" rossorigin="anonymous">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/themes/base/jquery-ui.min.css">
</head>
<body>

    <form class="w-75 mx-auto" method="GET" id="submit">

        <!-- add name -->
        <p class="mt-3">あなたの名前を入力してください。</p>
        <div>
            <input class="form-control w-100 mt-1" name="name" required>
        </div>

        <!-- mail address -->
        <p class="mt-3">メールアドレスを入力してください。</p>
        <div>
            <input class="form-control w-100 mt-1" name="mailAddress" required>
        </div>

        <!-- question1 -->
        <p class="mt-3">1. 遅刻はなく、始業時間には業務が開始できる状態にある。</p>
        <div>
            <div class="form-check form-check-inline">
                <input class="form-check-input q1" type="radio" name="question1" id="question1" value="S">
                <label class="form-check-label" for="question1"> - ◯ (丸)</label>
            </div>
            <div class="form-check form-check-inline">
                <input class="form-check-input q1" type="radio" name="question1" id="question1" value="A">
                <label class="form-check-label" for="question1"> - △ (三角)</label>
            </div>
            <div class="form-check form-check-inline">
                <input class="form-check-input q1" type="radio" name="question1" id="question1" value="B">
                <label class="form-check-label" for="question1"> - □ (四角)</label>
            </div>
        </div>

       

        <!-- question2 -->
        <p class="mt-3">2. 上司に報告せず、理由なく早退していない。</p>
        <div>
            <div class="form-check form-check-inline">
                <input class="form-check-input q2" type="radio" name="question2" id="question2" value="S">
                <label class="form-check-label" for="question2"> - ◯ (丸)</label>
            </div>
            <div class="form-check form-check-inline">
                <input class="form-check-input q2" type="radio" name="question2" id="question2" value="A">
                <label class="form-check-label" for="question2"> - △ (三角)</label>
            </div>
            <div class="form-check form-check-inline">
                <input class="form-check-input q2" type="radio" name="question2" id="question2" value="B">
                <label class="form-check-label" for="question2"> - □ (四角)</label>
            </div>
        </div>

        <!-- question3 -->
        <p class="mt-3">3. 事前申告のない無断欠勤はない。</p>
        <div>
            <div class="form-check form-check-inline">
                <input class="form-check-input q3" type="radio" name="question3" id="question3" value="S">
                <label class="form-check-label" for="question3"> - ◯ (丸)</label>
            </div>
            <div class="form-check form-check-inline">
                <input class="form-check-input q3" type="radio" name="question3" id="question3" value="A">
                <label class="form-check-label" for="question3"> - △ (三角)</label>
            </div>
            <div class="form-check form-check-inline">
                <input class="form-check-input q3" type="radio" name="question3" id="question3" value="B">
                <label class="form-check-label" for="question3"> - □ (四角)</label>
            </div>
        </div>

        <!-- submit button -->
        <input class="mt-4 btn btn-primary" type="submit"  value="submit">
    </form>
    

    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" crossorigin="anonymous"></script>
    <script charset="utf-8" src="https://static.line-scdn.net/liff/edge/2.1/sdk.js"></script>
    <script>

        $(document).ready(function () {
            const liffId = "1657250133-PxvKNJLX";
            initializeLiff(liffId);
        })

        function initializeLiff(liffId) {
            liff.init({
                liffId: liffId
            }).then(() => {
                initializeApp();
            }).catch((err) => {
                console.log('LIFF Initialization failed ', err);
            });
        }

        function sendText(text) {
            liff.sendMessages([{
                'type': 'text',
                'text': text
            }]).then(function () {
                liff.closeWindow();
            }).catch(function (error) {
                window.alert('Failed to send message ' + error);
            });
        }

        const params = (new URL(document.location)).searchParams;
        const key = params.get('key');

        $(function () {
            $('form').submit(function () {
                const name    = $('input[name="name"]').val();
                const mailAddress = $('input[name="mailAddress"]').val();
                const q1  = $("input[name='question1']:checked").val();
                const q2  = $("input[name='question2']:checked").val();
                const q3 = $("input[name='question3']:checked").val();


                const msg = `${name}\n${mailAddress}\n${q1}\n${q2}\n${q3}`;
                console.log("name: " + name);
                console.log("mailAddress: " + mailAddress);
                console.log("q1: " + q1);
                console.log("q2: " + q2);
                console.log("q3: " + q3);
                sendText(msg);
                return false;
            });
        });

    </script>

</body>
</html>